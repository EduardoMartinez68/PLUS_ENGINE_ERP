<style>
  .customers-list {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    /* Espacio entre clientes */
    width: 100%;
  }

.container-padding {
  padding-top: 0px;
  padding-right: 30px;
  padding-bottom: 0px;
  padding-left: 30px;
}
</style>
<br>
{% load static %}

<!--
  <div class="container">

    <div class="metrics">
      <div class="metric-card">
        <h2>128</h2>
        <p t="dashboard-total-customer">Total Customer</p>
      </div>
      <div class="metric-card">
        <h2>102</h2>
        <p>Customer Activate</p>
      </div>
      <div class="metric-card">
        <h2>26</h2>
        <p t="dashboard-customer-activate">Inactive</p>
      </div>
      <div class="metric-card">
        <h2>18</h2>
        <p t="dashboard-new-customer">New Customer (month)</p>
      </div>
    </div>
  </div>
  --->


<plus-switch-column id="customers-switch">
  <div slot="col1" class="col-9">
    {% include 'partialsCustomers/tableCustomers.html' %}
  </div>

  <div slot="col2" class="col-7">
    <br><br>
    <button class="close-col2-btn" onclick="toggle_switch_column('customers-switch',false)">×</button>
    {% include 'partialsCustomers/infoCustomer.html' %}
  </div>
</plus-switch-column>





<script>
class PlusSwitchColumn extends HTMLElement {
  connectedCallback() {
    const wrapper = document.createElement('div');
    wrapper.classList.add('switch-wrapper');

    const col1 = document.createElement('div');
    col1.classList.add('col1');
    const col2 = document.createElement('div');
    col2.classList.add('col2');

    const slot1 = this.querySelector('[slot="col1"]');
    const slot2 = this.querySelector('[slot="col2"]');
    if(slot1) col1.appendChild(slot1);
    if(slot2) col2.appendChild(slot2);

    wrapper.appendChild(col1);
    wrapper.appendChild(col2);
    this.appendChild(wrapper);

    if(!document.getElementById('plus-switch-column-styles')) {
      const style = document.createElement('style');
      style.id = 'plus-switch-column-styles';
      style.textContent = `
        plus-switch-column {
          display: block;
          width: 100%;
        }

        .switch-wrapper {
          position: relative;
          width: 100%;
        }

        .switch-wrapper .col1,
        .switch-wrapper .col2 {
          padding: 10px;
          box-sizing: border-box;
        }

        /* MÓVIL: columna superpuesta */
        @media (max-width: 768px) {
          .switch-wrapper .col1,
          .switch-wrapper .col2 {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            overflow-y: auto;
            transition: transform 0.3s ease;
            background-color: #F6F5F8;
            z-index: 10;
          }

          .switch-wrapper .col1 { z-index: 1; }
          .switch-wrapper .col2 { transform: translateX(100%); }
          .switch-wrapper .col2.active { transform: translateX(0); }
        }

        /* DESKTOP: columnas lado a lado */
        @media (min-width: 769px) {
          .switch-wrapper {
            display: flex;
          }
          .switch-wrapper .col1,
          .switch-wrapper .col2 {
            position: relative;
            width: 50%;
            height: auto;
            transform: none !important;
          }
          .open-col2-btn,
          .close-col2-btn { display: none; }
        }

        .open-col2-btn,
        .close-col2-btn {
          cursor: pointer;
          font-size: 1.2rem;
          padding: 6px 12px;
          border: none;
          color: white;
          border-radius: 6px;
          margin-bottom: 10px;
          background:#075EAB;
        }
      `;
      document.head.appendChild(style);
    }

    const openBtn = col1.querySelector('.open-col2-btn');
    const closeBtn = col2.querySelector('.close-col2-btn');

    const isMobile = window.innerWidth <= 768;
    if(isMobile && openBtn) openBtn.addEventListener('click', () => col2.classList.add('active'));
    if(isMobile && closeBtn) closeBtn.addEventListener('click', () => col2.classList.remove('active'));

    this.col2 = col2;
  }
}

customElements.define('plus-switch-column', PlusSwitchColumn);


function toggle_switch_column(id, open = true) {
  const element = document.getElementById(id);
  if (!element || !element.col2) return;
  const isMobile = window.innerWidth <= 768;
  if (!isMobile) return; // Solo aplica en móviles
  if (open) {
    element.col2.classList.add('active');
  } else {
    element.col2.classList.remove('active');
  }
}
</script>

<message-pop name="form-folder" title="files.title.folder">
    <div class="upload-card">
        <form id="folderForm">
            <input type="hidden" id="folder_id">
            <div class="section">
                <input-field label="files.label.name-folder" placeholder="files.placeholder.name-folder"
                    name="name"></input-field>
            </div>
            <label t="files.label.folder-color"></label>
            <input-color></input-color>
            <br>
            <button type="button" class="btn btn-edit btn-success" t="btn.save" onclick="send_form_of_the_folder()"></button>
        </form>
    </div>
</message-pop>


<script>
    async function save_new_folder(){
        //we will send the form to the server for save the new folder
        const backend=await window.send_form_to_the_server('folderForm', 'files/create_new_folder/');
        if(!backend.success){
            window.show_alert('alert', 'error.general', backend.message || 'error.general-description', backend.error || '');
            return;
        }

        //if we can added the new folder now restart the form and show a message of confirm
        window.restart_form('folderForm');
        window.hide_pop('form-folder');
        window.show_alert('alert', 'files.title.folder-create','files.message.folder-create', backend.error || '');
    }

    async function update_folder(){
        //we will send the form to the server for save the new folder
        const backend=await window.send_form_to_the_server('folderForm', 'files/create_new_folder/');
        if(!backend.success){
            window.show_alert('alert', 'error.general', backend.message || 'error.general-description', backend.error || '');
            return;
        }

        //if we can added the new folder now restart the form and show a message of confirm
        window.restart_form('folderForm');
        window.hide_pop('form-folder')
        window.show_alert('alert', 'files.title.the-folder-was-update', 'files.message.the-folder-was-update', backend.error || '');
    }

    async function send_form_of_the_folder(){
        //first we will see if exist a folder for edit
        const folderInput=document.getElementById('folder_id');
        if(folderInput && folderInput.value.trim() !== ''){
            await save_new_folder();
        }else{
            await update_folder();
        }
    }

    async function get_information_of_the_folder(folder_id){
        //this functions is for get the information of a folder by his id from the database
        
    }
</script>